// Generated by CoffeeScript 1.6.2
(function() {
  var $;

  $ = jQuery;

  $.offCanvasMenu = function(options) {
    var body, head, menu, menuLeft, settings, transformDistance, transitionCSS, trigger;

    settings = {
      direction: "left",
      menu: "#menu",
      trigger: "#menu-trigger"
    };
    settings = $.extend(settings, options);
    head = $(document.head);
    body = $("body");
    trigger = $(settings.trigger);
    menu = $(settings.menu);
    transformDistance = settings.direction === "left" ? "70%" : "-70%";
    menuLeft = settings.direction === "left" ? "-70%" : "100%";
    transitionCSS = "<style>    body.off-canvas-menu .outer-wrapper {      overflow-x: hidden;    }    body.off-canvas-menu .inner-wrapper {      -webkit-transform: translate3d(0, 0, 0);      -moz-transform: translate3d(0, 0, 0);      -ms-transform: translate3d(0, 0, 0);      -o-transform: translate3d(0, 0, 0);      transform: translate3d(0, 0, 0);      -webkit-transition: -webkit-transform 250ms ease;      -moz-transition: -moz-transform 250ms ease;      -o-transition: -o-transform 250ms ease;      transition: transform 250ms ease;      -webkit-backface-visibility: hidden;      -moz-backface-visibility: hidden;      -ms-backface-visibility: hidden;      -o-backface-visibility: hidden;      backface-visibility: hidden;    }    body.off-canvas-menu.menu-open .inner-wrapper {      -webkit-transform: translate3d(" + transformDistance + ", 0, 0);      -moz-transform: translate3d(" + transformDistance + ", 0, 0);      -ms-transform: translate3d(" + transformDistance + ", 0, 0);      -o-transform: translate3d(" + transformDistance + ", 0, 0);      transform: translate3d(" + transformDistance + ", 0, 0);      -webkit-transition: -webkit-transform 250ms ease;      -moz-transition: -moz-transform 250ms ease;      -o-transition: -o-transform 250ms ease;      transition: transform 250ms ease;      -webkit-backface-visibility: hidden;      -moz-backface-visibility: hidden;      -ms-backface-visibility: hidden;      -o-backface-visibility: hidden;      backface-visibility: hidden;    }    body.off-canvas-menu " + settings.menu + " {      left: " + menuLeft + ";      margin: 0;      position: absolute;      top: 0;      width: 70%;    }  </style>";
    head.append(transitionCSS);
    body.children().wrapAll("<div class=\"outer-wrapper\" />");
    $(".outer-wrapper > *").wrapAll("<div class=\"inner-wrapper\" />");
    return {
      on: function() {
        body.addClass("off-canvas-menu");
        return trigger.on("touchstart mousedown", function(e) {
          var height;

          e.preventDefault();
          height = Math.max(menu.height(), body.height(), $(window).height());
          $(".outer-wrapper, .inner-wrapper").css("height", height);
          if (height > menu.height()) {
            menu.css("height", height);
          }
          return body.toggleClass("menu-open");
        });
      },
      off: function() {
        body.removeClass("off-canvas-menu");
        return trigger.off("touchstart mousedown");
      },
      show: function() {
        return body.addClass("menu-open");
      },
      hide: function() {
        return body.removeClass("menu-open");
      }
    };
  };

}).call(this);
